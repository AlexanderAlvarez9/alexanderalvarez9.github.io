const translations = {
  en: {
    nav: {
      about: 'about',
      skills: 'skills',
      experience: 'experience',
      projects: 'projects',
      certifications: 'certs',
      contact: 'contact'
    },
    hero: {
      greeting: 'Hello, World!',
      name: 'Alexander Alvarez',
      role: 'Software Engineer Senior',
      subtitle: 'Full Stack Developer | Cloud & Security Specialist',
      cta: {
        contact: 'Get in Touch',
        resume: 'Download CV'
      }
    },
    about: {
      tag: 'About Me',
      title: 'Building Digital Solutions',
      subtitle: 'Software Engineer with extensive experience leading high-scale architectures and optimizing the software development lifecycle.',
      description1: 'Senior Software Engineer with a strong background in leading high-scale architectures and optimizing the SDLC through AI-Augmented Development (Cursor, n8n, MCP). Specialist in FullStack solutions (Golang, React, Node.js, Python) with a strategic focus on multicloud security ‚Äîbacked by certifications like AWS Solutions Architect Associate and Azure Fundamentals‚Äî and high business impact delivery. Expert in transforming complex requirements into scalable and efficient systems.',
      description2: '',
      stats: {
        experience: 'Years Exp.',
        projects: 'Projects',
        certifications: 'Certifications'
      }
    },
    skills: {
      tag: 'Tech Stack',
      title: 'Skills & Technologies',
      subtitle: 'Tools and technologies I work with daily',
      categories: {
        languages: {
          title: 'Languages & Runtimes',
          icon: 'üíª'
        },
        frontend: {
          title: 'Frontend Ecosystem',
          icon: 'üé®'
        },
        backend: {
          title: 'Backend & Architecture',
          icon: '‚öôÔ∏è'
        },
        cloud: {
          title: 'Cloud & DevOps',
          icon: '‚òÅÔ∏è'
        },
        data: {
          title: 'Databases & Data',
          icon: 'üóÑÔ∏è'
        },
        ai: {
          title: 'AI & Productivity',
          icon: 'ü§ñ'
        }
      }
    },
    experience: {
      tag: 'Career Path',
      title: 'Professional Experience',
      subtitle: 'My journey in software development',
      jobs: {
        meli: {
          title: 'Software Engineer',
          company: 'Mercado Libre',
          date: 'Dec 2022 - Present',
          description: 'Leading CSPM API development for automated vulnerability detection in AWS, GCP, and Azure. Building high-concurrency microservices in Golang and scalable frontend architectures in React/TypeScript.'
        },
        teleperformance: {
          title: 'Software Engineer II',
          company: 'Teleperformance CO',
          date: 'Nov 2021 - Dec 2022',
          description: 'Led communication platform for <1,000 agents, integrating AI services for real-time translation and dictation. Designed Angular interfaces and Golang microservices on Azure/GCP.'
        },
        amaris: {
          title: 'FullStack Developer',
          company: 'Amaris Consulting',
          date: 'Nov 2020 - Nov 2021',
          description: 'Developed web application for insurance policy quotation, issuance, and payments. Built Frontend and Backend for tuseguro.libertyseguros.co using hexagonal architecture.'
        }
      }
    },
    projects: {
      tag: 'Portfolio',
      title: 'Featured Projects',
      subtitle: 'Some of my recent work',
      items: {
        troud: {
          title: 'Troud',
          description: 'Web application for clothing exchange between users. Match system for cost-free garment swapping.',
          link: 'View Project'
        },
        itil: {
          title: 'ITIL-Support',
          description: 'Ticket system for incident management using ITIL framework. Firebase Auth and Firestore integration.',
          link: 'View Project'
        }
      }
    },
    certifications: {
      tag: 'Credentials',
      title: 'Certifications',
      subtitle: 'Professional certifications and credentials',
      featured: 'Featured',
      items: {
        awsArch: {
          title: 'AWS Solutions Architect',
          issuer: 'Amazon Web Services',
          level: 'Associate'
        },
        awsPract: {
          title: 'AWS Cloud Practitioner',
          issuer: 'Amazon Web Services',
          level: 'Foundational'
        },
        azure: {
          title: 'Azure Fundamentals',
          issuer: 'Microsoft Azure',
          level: 'AZ-900'
        }
      }
    },
    contact: {
      tag: 'Get in Touch',
      title: "Let's Work Together",
      subtitle: "Have a project in mind? Let's talk!",
      email: 'Email',
      linkedin: 'LinkedIn',
      github: 'GitHub'
    },
    footer: {
      made: 'Built with',
      by: 'by Alexander Alvarez',
      rights: 'All rights reserved'
    }
  },
  es: {
    nav: {
      about: 'sobre-mi',
      skills: 'skills',
      experience: 'experiencia',
      projects: 'proyectos',
      certifications: 'certs',
      contact: 'contacto'
    },
    hero: {
      greeting: '¬°Hola, Mundo!',
      name: 'Alexander Alvarez',
      role: 'Software Engineer Senior',
      subtitle: 'Desarrollador Full Stack | Especialista en Cloud & Seguridad',
      cta: {
        contact: 'Cont√°ctame',
        resume: 'Descargar CV'
      }
    },
    about: {
      tag: 'Sobre M√≠',
      title: 'Construyendo Soluciones Digitales',
      subtitle: 'Ingeniero de Software con amplia experiencia liderando arquitecturas de alta escala y optimizando el ciclo de vida del desarrollo.',
      description1: 'Software Engineer Senior con amplia trayectoria liderando arquitecturas de alta escala y optimizando el ciclo de vida de desarrollo (SDLC) mediante AI-Augmented Development (Cursor, n8n, MCP). Especialista en soluciones FullStack (Golang, React, Node.js, Python) con un enfoque estrat√©gico en seguridad multicloud ‚Äîrespaldado por certificaciones como AWS Solutions Architect Associate y Azure Fundamentals‚Äî y entrega de alto impacto de negocio. Experto en transformar requerimientos complejos en sistemas escalables y eficientes.',
      description2: '',
      stats: {
        experience: 'A√±os Exp.',
        projects: 'Proyectos',
        certifications: 'Certificaciones'
      }
    },
    skills: {
      tag: 'Stack Tecnol√≥gico',
      title: 'Habilidades & Tecnolog√≠as',
      subtitle: 'Herramientas y tecnolog√≠as con las que trabajo diariamente',
      categories: {
        languages: {
          title: 'Lenguajes & Runtimes',
          icon: 'üíª'
        },
        frontend: {
          title: 'Ecosistema Frontend',
          icon: 'üé®'
        },
        backend: {
          title: 'Backend & Arquitectura',
          icon: '‚öôÔ∏è'
        },
        cloud: {
          title: 'Cloud & DevOps',
          icon: '‚òÅÔ∏è'
        },
        data: {
          title: 'Bases de Datos',
          icon: 'üóÑÔ∏è'
        },
        ai: {
          title: 'IA & Productividad',
          icon: 'ü§ñ'
        }
      }
    },
    experience: {
      tag: 'Trayectoria',
      title: 'Experiencia Profesional',
      subtitle: 'Mi camino en el desarrollo de software',
      jobs: {
        meli: {
          title: 'Software Engineer',
          company: 'Mercado Libre',
          date: 'Dic 2022 - Actual',
          description: 'Liderando desarrollo de API CSPM para detecci√≥n automatizada de vulnerabilidades en AWS, GCP y Azure. Construyendo microservicios de alta concurrencia en Golang y arquitecturas frontend escalables en React/TypeScript.'
        },
        teleperformance: {
          title: 'Software Engineer II',
          company: 'Teleperformance CO',
          date: 'Nov 2021 - Dic 2022',
          description: 'Lider√© plataforma de comunicaci√≥n para <1,000 agentes, integrando servicios de IA para traducci√≥n y dictado en tiempo real. Dise√±√© interfaces en Angular y microservicios en Golang en Azure/GCP.'
        },
        amaris: {
          title: 'Desarrollador FullStack',
          company: 'Amaris Consulting',
          date: 'Nov 2020 - Nov 2021',
          description: 'Desarroll√© aplicativo web para cotizaci√≥n, emisi√≥n y pagos de p√≥lizas de seguros. Constru√≠ Frontend y Backend para tuseguro.libertyseguros.co usando arquitectura hexagonal.'
        }
      }
    },
    projects: {
      tag: 'Portafolio',
      title: 'Proyectos Destacados',
      subtitle: 'Algunos de mis trabajos recientes',
      items: {
        troud: {
          title: 'Troud',
          description: 'Aplicaci√≥n web para intercambio de prendas entre usuarios. Sistema de match para intercambio sin costo.',
          link: 'Ver Proyecto'
        },
        itil: {
          title: 'ITIL-Support',
          description: 'Sistema de tickets para gesti√≥n de incidencias usando framework ITIL. Integraci√≥n con Firebase Auth y Firestore.',
          link: 'Ver Proyecto'
        }
      }
    },
    certifications: {
      tag: 'Credenciales',
      title: 'Certificaciones',
      subtitle: 'Certificaciones y credenciales profesionales',
      featured: 'Destacada',
      items: {
        awsArch: {
          title: 'AWS Solutions Architect',
          issuer: 'Amazon Web Services',
          level: 'Associate'
        },
        awsPract: {
          title: 'AWS Cloud Practitioner',
          issuer: 'Amazon Web Services',
          level: 'Foundational'
        },
        azure: {
          title: 'Azure Fundamentals',
          issuer: 'Microsoft Azure',
          level: 'AZ-900'
        }
      }
    },
    contact: {
      tag: 'Contacto',
      title: 'Trabajemos Juntos',
      subtitle: '¬øTienes un proyecto en mente? ¬°Hablemos!',
      email: 'Email',
      linkedin: 'LinkedIn',
      github: 'GitHub'
    },
    footer: {
      made: 'Hecho con',
      by: 'por Alexander Alvarez',
      rights: 'Todos los derechos reservados'
    }
  }
};

let currentLang = 'es';

function setLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('preferredLang', lang);
  updateContent();
  updateLangButtons();
}

function updateLangButtons() {
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.classList.toggle('active', btn.dataset.lang === currentLang);
  });
}

function updateContent() {
  const t = translations[currentLang];
  
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    const value = getNestedValue(t, key);
    if (value) {
      el.textContent = value;
    }
  });

  document.querySelectorAll('[data-i18n-href]').forEach(el => {
    const key = el.dataset.i18nHref;
    const value = getNestedValue(t, key);
    if (value) {
      el.href = `#${value}`;
    }
  });
}

function getNestedValue(obj, path) {
  return path.split('.').reduce((acc, part) => acc && acc[part], obj);
}

function typeWriter(element, text, speed = 50) {
  let i = 0;
  element.textContent = '';
  
  function type() {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }
  
  type();
}

function initTypingEffect() {
  const terminalLines = document.querySelectorAll('.terminal-line[data-typing]');
  
  terminalLines.forEach((line, index) => {
    const text = line.dataset.typing;
    const delay = index * 1000;
    
    setTimeout(() => {
      typeWriter(line.querySelector('.terminal-output') || line, text, 30);
    }, delay);
  });
}

function initScrollAnimations() {
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        
        if (entry.target.dataset.delay) {
          entry.target.style.transitionDelay = entry.target.dataset.delay;
        }
      }
    });
  }, observerOptions);

  document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
    observer.observe(el);
  });
}

function initMobileMenu() {
  const menuBtn = document.querySelector('.mobile-menu-btn');
  const navLinks = document.querySelector('.nav-links');
  
  if (menuBtn && navLinks) {
    menuBtn.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      menuBtn.textContent = navLinks.classList.contains('active') ? '‚úï' : '‚ò∞';
    });

    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
        menuBtn.textContent = '‚ò∞';
      });
    });
  }
}

function initSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      
      if (target) {
        const headerOffset = 80;
        const elementPosition = target.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

        window.scrollTo({
          top: offsetPosition,
          behavior: 'smooth'
        });
      }
    });
  });
}

function initNavbarScroll() {
  const nav = document.querySelector('nav');
  let lastScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    
    if (currentScroll > 100) {
      nav.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.3)';
    } else {
      nav.style.boxShadow = 'none';
    }
    
    lastScroll = currentScroll;
  });
}

function initParallax() {
  const heroGrid = document.querySelector('.hero-grid');
  
  if (heroGrid) {
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      heroGrid.style.transform = `translateY(${scrolled * 0.3}px)`;
    });
  }
}

function initTerminalAnimation() {
  const terminalLines = document.querySelectorAll('.hero-terminal .terminal-line');
  
  terminalLines.forEach((line, index) => {
    line.style.opacity = '0';
    line.style.transform = 'translateX(-20px)';
    
    setTimeout(() => {
      line.style.transition = 'all 0.5s ease';
      line.style.opacity = '1';
      line.style.transform = 'translateX(0)';
    }, 500 + (index * 200));
  });
}

function initSkillHover() {
  const skillTags = document.querySelectorAll('.skill-tag');
  
  skillTags.forEach(tag => {
    tag.addEventListener('mouseenter', () => {
      tag.style.transform = 'scale(1.05)';
    });
    
    tag.addEventListener('mouseleave', () => {
      tag.style.transform = 'scale(1)';
    });
  });
}

function initProjectsToggle() {
  const toggleBtn = document.getElementById('toggleMoreProjects');
  const moreProjects = document.getElementById('moreProjects');
  const toggleText = toggleBtn?.querySelector('[data-i18n-toggle]');
  
  if (toggleBtn && moreProjects) {
    toggleBtn.addEventListener('click', () => {
      const isVisible = moreProjects.classList.contains('visible');
      
      if (isVisible) {
        moreProjects.classList.remove('visible');
        toggleBtn.classList.remove('active');
        if (toggleText) {
          toggleText.textContent = currentLang === 'es' ? 'Ver m√°s proyectos' : 'View more projects';
        }
      } else {
        moreProjects.classList.add('visible');
        toggleBtn.classList.add('active');
        if (toggleText) {
          toggleText.textContent = currentLang === 'es' ? 'Ver menos' : 'View less';
        }
      }
    });
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const savedLang = localStorage.getItem('preferredLang');
  if (savedLang) {
    currentLang = savedLang;
  }
  
  updateContent();
  updateLangButtons();
  
  initScrollAnimations();
  initMobileMenu();
  initSmoothScroll();
  initNavbarScroll();
  initParallax();
  initTerminalAnimation();
  initSkillHover();
  initProjectsToggle();
  
  const currentYearElement = document.getElementById('current-year');
  if (currentYearElement) {
    currentYearElement.textContent = new Date().getFullYear();
  }
  
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      setLanguage(btn.dataset.lang);
    });
  });
});

window.addEventListener('load', () => {
  document.body.classList.add('loaded');
});
